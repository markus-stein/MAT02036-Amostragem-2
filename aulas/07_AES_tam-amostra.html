<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>MAT02036 - Amostragem 2</title>
    <meta charset="utf-8" />
    <meta name="author" content="Markus Stein" />
    <script src="libs/header-attrs-2.18/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/default-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, title-slide

.title[
# MAT02036 - Amostragem 2
]
.subtitle[
## Aula 07 - Amostragem Estratificada - Tamanho Amostral
]
.author[
### Markus Stein
]
.institute[
### Departamento de Estat√≠stica, IME/UFRGS
]
.date[
### 2022/2
]

---




<div>
<style type="text/css">.xaringan-extra-logo {
width: 110px;
height: 128px;
z-index: 0;
background-image: url(C:/Users/User/Documents/MAT02036-Amostragem-2/img/logo_dest.png);
background-size: contain;
background-repeat: no-repeat;
position: absolute;
top:1em;right:1em;
}
</style>
<script>(function () {
  let tries = 0
  function addLogo () {
    if (typeof slideshow === 'undefined') {
      tries += 1
      if (tries < 10) {
        setTimeout(addLogo, 100)
      }
    } else {
      document.querySelectorAll('.remark-slide-content:not(.title-slide):not(.inverse):not(.hide_logo)')
        .forEach(function (slide) {
          const logo = document.createElement('div')
          logo.classList = 'xaringan-extra-logo'
          logo.href = null
          slide.appendChild(logo)
        })
    }
  }
  document.addEventListener('DOMContentLoaded', addLogo)
})()</script>
</div>

### *Housekeeping*

* Aproveitem o momento presencial para tirar d√∫vidas

* Se estiv√©ssemos no ensino remoto ou √† dist√¢ncia

  + voc√™s poderiam estar somente ouvindo, sem intera√ß√£o
  
  + ou assistindo v√≠deos e material em outro momento
  
* Depois das aulas, rever material da aula passada

  + fazer exerc√≠cios
  
  + se preparar para a pr√≥xima aula

---

## Aula passada üíæ
**Compara√ß√£o de alternativas de aloca√ß√£o da amostra**

* Sob *aloca√ß√£o de Neyman*, 
`$$V_{AESne} \left( \overline y_{AES} \right) \le V_{AESpr} \left( \overline y_{AES} \right) \le V_{AAS} \left( \overline y \right)$$`

* **AES** com aloca√ß√£o de **Neyman** √© **mais eficiente** que **AES** com aloca√ß√£o **proporcional**.

* Ambas superam **AAS** como plano amostral para um mesmo tamanho especificado de amostra. 

**Efeito do Plano Amostral/Delineamento** (*Design Effect*) de um *plano* amostral
`$$EPA_{plano} = deff_{plano} = \frac{Var(\overline y_{plano})}{Var(\overline y_{AAS_c})}.$$`

* se `\(deff_{plano} &lt; 1\)` ent√£o o **plano** √© mais eficiente que a **AASc**.

---

## Aula passada üìÄ
**Compara√ß√£o de alternativas de aloca√ß√£o da amostra**

**Outro exemplo** de hoje: üí™

Sabemos mostrar `\(EPA_{AES_{pr}} = deff_{AES_{pr}}\)` e `\(EPA_{AES_{pr}} = deff_{AES_{pr}}\)` assumindo **AASc** dentro dos estratos‚ùì

---

class: inverse, middle, center

# Tamanho da amostra na **AES**

---

## Tamanho da amostra na **AES**

* Podemos determinar o **tamanho total da amostra** estratificada, a partir das express√µes das vari√¢ncias dos estimadores, dado: 
  + o tipo de **aloca√ß√£o**, `\(w_h = n_h / n\)`;
  + a **vari√¢ncia m√°xima**, `\(V\)`, desejada para a estimativa do par√¢metro.

* Ex.: Estima√ß√£o da **m√©dia populacional** sob **AASs** dentro dos estratos.
  
  + Substituindo `\(n_h = n \times w_h\)` na express√£o da vari√¢cia do estimador, e fixando `\(V\)` o valor m√°ximo para sua estimativa,

`$$V \ge V_{AES} \left( \overline y_{AES} \right) = \sum_{h=1}^{H} W_h^2 S_{h,y}^2 \left( \frac{1}{n_h} - \frac{1}{N_h} \right) = \frac1n\sum_{h=1}^{H} \frac {W_h^2 S_{h,y}^2}{w_h} - \frac1N\sum_{h=1}^{H}{ W_h S_{h,y}^2}.$$`
Logo (‚ùì)
`$$n \ge \frac {\sum_{h=1}^{H} \frac {W_h^2 S_{h,y}^2}{w_h}}{V+\frac1N\sum_{h=1}^{H}{ W_h S_{h,y}^2}}$$`

* E sob **AASc** dentro dos estratos‚ùì

---

## Tamanho da amostra na **AES** - m√©dia
### Estima√ß√£o da **m√©dia populacional** sob **AASc**

Supondo uma aloca√ß√£o `\(w_h = n_h / n\)` e **AASc** dentro dos estratos, 

<svg aria-hidden="true" role="img" viewBox="0 0 256 512" style="height:1em;width:0.5em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:steelblue;overflow:visible;position:relative;"><path d="M160 64c0-11.8-6.5-22.6-16.9-28.2s-23-5-32.9 1.6l-96 64C-.5 111.2-4.4 131 5.4 145.8s29.7 18.7 44.4 8.9L96 123.8V416H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h96 96c17.7 0 32-14.3 32-32s-14.3-32-32-32H160V64z"/></svg>. A **vari√¢ncia do estimador** √© dada por 
`$$V_{AES} \left( \overline y_{AES} \right) = \sum_{h=1}^{H} W_h^2 \frac{ Var_{h,y} }{n_h} = \sum_{h=1}^{H} W_h^2 \frac{ Var_{h,y} }{nw_h} = \frac{1}{n} \sum_{h=1}^{H} W_h^2 \frac{ Var_{h,y} }{w_h}.$$`

<svg aria-hidden="true" role="img" viewBox="0 0 320 512" style="height:1em;width:0.62em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:steelblue;overflow:visible;position:relative;"><path d="M142.9 96c-21.5 0-42.2 8.5-57.4 23.8L54.6 150.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L40.2 74.5C67.5 47.3 104.4 32 142.9 32C223 32 288 97 288 177.1c0 38.5-15.3 75.4-42.5 102.6L109.3 416H288c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-12.9 0-24.6-7.8-29.6-19.8s-2.2-25.7 6.9-34.9L200.2 234.5c15.2-15.2 23.8-35.9 23.8-57.4c0-44.8-36.3-81.1-81.1-81.1z"/></svg>. Ent√£o definindo uma **vari√¢ncia m√°xima** para a estimativa do par√¢metro,

`$$\begin{eqnarray} V \ge V_{AES} \left( \overline y_{AES} \right) &amp; \Leftrightarrow &amp; V \ge \frac{1}{n} \sum_{h=1}^{H} W_h^2 \frac{ Var_{h,y} }{w_h} \end{eqnarray},$$`

ou seja,

`$$n \ge \frac{\sum_{h=1}^{H} W_h^2 \frac{ Var_{h,y} }{w_h} }{V}.$$`

---

## Tamanho da amostra na **AES** - total
### Estima√ß√£o do **total populacional**

* Sob **AASs** dentro dos estratos sabemos que 

`$$Var_{AES} \left( \widehat T_{AES} \right) = \sum_{h=1}^{H} N_h^2 S_{h,y}^2 \left( \frac{1}{n_h} - \frac{1}{N_h} \right) = \ldots = \frac{1}{N^2} V_{AES} \left( \overline y_{AES} \right)$$`

  + Fazendo `\(V_T \ge V_{AES} \left( \widehat T_{AES} \right) = \sum_{h=1}^{H} N_h^2 S_{h,y}^2 \left( \frac{1}{n_h} - \frac{1}{N_h} \right)\)`

`$$n \ge \frac {\sum_{h=1}^{H} \frac{N_h^2 S_{h,y}^2}{w_h}}{V_T + \sum_{h=1}^{H}{ N_h S_{h,y}^2}}$$`

* E na estima√ß√£o do **total populacional** sob **AASc** dentro dos estratos‚ùì‚ùì‚ùì

`$$n \ge \frac{\sum_{h=1}^{H} \frac{N_h^2 Var_{h,y}}{w_h}}{V_T}$$`

---

class: inverse, middle, center

# E a margem de erro?

---

## Tamanho da amostra na **AES** - e a margem de erro?
#### Margem de erro absoluta - estima√ß√£o da **m√©dia**

* Podemos pensar na **vari√¢ncia m√°xima** `\(V\)` como uma **fun√ß√£o** da **margem de erro** `\(e\)`, tal que 

`$$P \left( \left| \overline y - \overline Y \right| \leq e \right) = P \left( \frac{ \left| \overline y - \overline Y \right|}{\sqrt{Var(\overline y)}} \leq \frac{e}{\sqrt{Var(\overline y)}} \right) = 1 - \alpha.$$` 
sendo `\(\alpha\)` uma 'probabilidade pequena', ou valor de signific√¢ncia.
 
* Usando a aproxima√ß√£o da distribui√ß√£o de `\(\overline y\)` para a distribui√ß√£o **normal**,

`$$e = z_\frac{\alpha}{2} \sqrt{Var(\overline y)} \Leftrightarrow V = \frac{e^2}{z^2_\frac{\alpha}{2}},$$`
onde `\(z_\frac{\alpha}{2}\)` √© o quantil da normal padr√£o que deixa √°rea `\(\alpha/2\)` √† sua direita.

* Quais suposi√ß√µes s√£o necess√°rias nesse caso‚ùì

* A dist√¢ncia m√°xima assumida `\(e\)` √© absoluta portando denominada **margem de erro absoluta**.

---

## Tamanho da amostra na **AES** - e a margem de erro?
#### Margem de erro relativa  - estima√ß√£o da **m√©dia**

* Muitas vezes queremos controlar o **erro relativo** `\(e_r\)` na estimativa, tal que

`$$P \left( \left| \frac{\overline y_{AES} - \overline Y}{\overline Y} \right| \leq e_r \right) = P \left( \frac{ \left| \overline y_{AES} - \overline Y \right| }{\sqrt{Var(\overline y_{AES})}} \leq \frac{e_r \left| \overline Y \right|}{\sqrt{Var(\overline y_{AES})}} \right) = 1 - \alpha.$$` 

* Novamente pela aproxima√ß√£o de `\(\overline y\)` para a distribui√ß√£o **normal**,

`$$r \overline Y = z_\frac{\alpha}{2} \sqrt{Var(\overline y_{AES})} \Leftrightarrow V_T = \frac{r^2 \overline Y^2}{z^2_\frac{\alpha}{2}}.$$`

* Express√µes de `\(\sqrt{Var(\overline y)}\)` na **AASc** ou **AASs**...(‚ùì)

  + Pode ser √∫til utilizar a rela√ß√£o entre vari√¢ncias que j√° conhecemos 

`$$Var(\overline y) = \frac{N-n}{n} \frac{S^2}{n} \Leftrightarrow \sqrt{Var(\overline y)} = \sqrt{\frac{N-n}{n}} \frac{S}{\sqrt{n}}$$`

---

## Tamanho da amostra na **AES** - e a margem de erro?
#### Margem de erro relativa  - estima√ß√£o do **total**

* No caso da estima√ß√£o do total o **erro relativo** `\(r\)` se refere ao total, tal que

`$$P \left( \left| \frac{\widehat T_{AES} - \overline T}{\overline T} \right| \leq r \right) = P \left( \frac{ \left| N\overline y_{AES} - N\overline Y \right| }{\sqrt{Var(\overline T_{AES})}} \leq \frac{r N \overline Y}{\sqrt{Var(\overline T_{AES})}} \right) = 1 - \alpha.$$`
  + Novamente pela aproxima√ß√£o de `\(\overline y\)` para a distribui√ß√£o **normal**,

`$$r N \overline Y = z_\frac{\alpha}{2} \sqrt{Var(\overline T_{AES})} \Leftrightarrow V = \frac{r^2 N^2 \overline Y^2}{z^2_\frac{\alpha}{2}}.$$`
* O **tamanho da amostra** `\(n\)` √© o **mesmo** na estima√ß√£o da **m√©dia** e **total**,
  + se usar erro relativo `\(e_r \overline Y\)` para definir `\(V\)` e usar `\(V \ge Var_{AES} (\overline y)\)`;
  + ou com erro relativo `\(e_r N \overline Y\)` para definir `\(V_T\)` e usar `\(V_T \ge Var_{AES} (\widehat T)\)`.

* Express√µes para **AASs** e **AASc** dentro dos estratos...(‚ùì)

&lt;!-- relacao entre erro relativo e definir CV... geralmente mais facil que definir V --&gt;

---

## Tamanho da amostra e Aloca√ß√µes

* Para obter a express√£o para uma aloca√ß√£o particular basta substituir `\(w_h\)` de forma adequada. 

  + Ex. no caso da **AESpr** basta substituir `\(w_h\)` por `\(W_h\)` e obter a express√£o para o c√°lculo do tamanho da amostra. 
  
  + Mostrar(‚ùì)

&lt;!-- * No caso da **AESot**, para um custo fixado `\(C\)`, basta substituir o valor de `\(n_h\)`, dado pela express√£o adequada, na fun√ß√£o de custo linear. --&gt;

&lt;!-- `$$n_{AESot} = \left( C - c_0 \right) \times \frac{\sum_{h=1}^{H} N_h S_{h,y} / \sqrt c_h} {\sum_{h=1}^{H} N_h S_{h,y} \sqrt c_h}$$` --&gt;

* Sabemos mostrar os resultados para diferentes `\(w_h\)`‚ùì

Aloca√ß√£o | Uniforme | Proporcional | de Neyman (AASs)
--|:--:|:--:|:--:
`\(w_h\)` | `\(\frac{1}{H}\)` | `\(\frac{N_h}{N} = W_h\)` | `\(\frac{S_h N_h}{\sum_{h=1}^H S_h N_h}\)`

* E no caso de **AASc** dentro dos estratos?

---

## Exemplo üí™

**Exemplo 7 da Apostila** da Profa Vanessa: 

Suponha que os restaurantes em uma cidade foram divididos em 3 estratos, de
acordo com a zona de localiza√ß√£o: `\(A\)` `\((N_1 = 600)\)`, `\(B\)` `\((N_2 = 300)\)` e `\(C\)` `\((N_3 = 100)\)`. Queremos
estimar o n√∫mero m√©dio de clientes por dia. Os valores do desvio padr√£o dos estratos s√£o: 20, 30
e 50 clientes, respectivamente. Determinar o tamanho de amostra pra estimar a m√©dia de clientes
por dia com um erro m√°ximo absoluto de 3 clientes e com 99,73% de confian√ßa (isto √©, `\(z\)` = 3).
Considere que ser√° feita uma **AASs** em cada estrato.

---

## Exemplo üí™

*Ainda n√£o falamos sobre estima√ß√£o de propor√ß√µes, mas ser√° nosso pr√≥ximo t√≥pico*

**Exemplo 8 da Apostila** da Profa Vanessa:: 

Seja uma popula√ß√£o de tamanho `\(N=1000\)`, estratificada em `\(H=2\)` estratos de tamanhos
iguais. Uma amostra piloto de tamanho `\(n_1 = 40\)` foi retirada do primeiro estrato, e outra de `\(n_2 = 60\)`
do segundo, com **AASs** em ambos. Na primeira amostra, houve 20 sucessos, e na segunda, 40.
Calcular o tamanho da amostra necess√°rio para estimar a propor√ß√£o com 99% de confian√ßa e erro
m√°ximo absoluto de 10%.

---

## Para casa üè†

* Continuar os Exemplos.

* Mostrar tamanho de amostra `\(n\)` para **AASc** dentro dos estratos nas aloca√ß√µes **AESun**, **AESpr**, **AESne**.

* Fazer exerc√≠cios 11.7 e 11.10 do livro 'Amostragem: Teoria e Pr√°tica Usando R'    https://amostragemcomr.github.io/livro/estrat.html#exerc11

* Fazer exerc√≠cio 5 da lista 1.

* Rever os slides.

&lt;!-- * Ler BOlfarine e Bussab...da se√ß√£o 11.3 do livro 'Amostragem: Teoria e Pr√°tica Usando R'. --&gt;



## Pr√≥xima aula üìä

* Amostragem Estratificada
  + Estima√ß√£o de propor√ß√µes
  + Exerc√≠cios e Intervalos de confian√ßa
  
&lt;!-- * Laborat√≥rio de <svg aria-hidden="true" role="img" viewBox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:steelblue;overflow:visible;position:relative;"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg> --&gt;

---

## Muito obrigado!

&lt;img src="img/image_basu_elephant.jpg" width="30%" height="30%" style="display: block; margin: auto;" /&gt;
Fonte: imagem do livro *Combined Survey Sampling Inference: Weighing of Basu's Elephants: Weighing Basu's Elephants*.



---

## Resumo da nota√ß√£o

* **Tamanho da amostra** na **AES** dado um tipo de **aloca√ß√£o**, `\(w_h\)`, e **fixando a vari√¢ncia** m√°xima que se deseja para a estimativa do par√¢metro, `\(V\)`

Par√¢metro | Sob AASc dentro dos estratos | Sob AASs dentro dos estratos
--|:--:|:--:
M√©dia | `\(n \ge \frac{\sum_{h=1}^{H} W_h^2 \frac{ Var_{h,y} }{w_h} }{V}\)` | `\(n \ge \frac {\sum_{h=1}^{H} \frac {W_h^2 S_{h,y}^2}{w_h}}{V+\frac1N\sum_{h=1}^{H}{ W_h S_{h,y}^2}}\)`
Total | `\(n \ge \frac{\sum_{h=1}^{H} N_h^2 \frac{ Var_{h,y} }{w_h} }{V}\)` | `\(n \ge \frac {\sum_{h=1}^{H} \frac {N_h^2 S_{h,y}^2}{w_h}}{V +  \sum_{h=1}^{H}{ N_h S_{h,y}^2}}\)`

* **Margem de erro** para o estimador `\(\widehat \theta\)` (approx. normal para dist. de `\(\widehat \theta\)`)

  + **Absoluta**: `\(e = z_\frac{\alpha}{2} \sqrt{ Var(\widehat \theta)} \Leftrightarrow V = \frac{e^2}{z^2_\frac{\alpha}{2}}\)`

  + **Relativa**: `\(e_r \left| \overline Y \right| = z_\frac{\alpha}{2} \sqrt{Var(\widehat \theta)} \Leftrightarrow V = \frac{e_r^2 \overline Y^2}{z^2_\frac{\alpha}{2}}\)`

* Pode ser √∫til utilizar a rela√ß√£o entre vari√¢ncias que j√° conhecemos `\(Var(\overline y) = \frac{N-n}{n} \frac{S^2}{n} \Leftrightarrow \sqrt{Var(\overline y)} = \sqrt{\frac{N-n}{n}} \frac{S}{\sqrt{n}}\)`

---

## Resumo da nota√ß√£o

* Tamanho m√≠nimo de amostra para **estima√ß√£o da m√©dia** populacional

.center[
Aloca√ß√£o | **AASc** dentro dos estratos | **AASs** dentro dos estratos
--|:--:|:--:
`\(AES_{un}\)` | `\(n \ge \frac{ H \sum_{h=1}^{H} W_h^2 Var_{h,y} }{V}\)` | `\(n \ge \frac{ H \sum_{h=1}^{H} W_h^2 S^2_h }{V + \frac{1}{N} \sum_{h=1}^{H} W_h S^2_h}\)`
`\(AES_{pr}\)` | `\(n \ge \frac{ \sum_{h=1}^{H} W_h Var_{h,y} }{V}\)` | `\(n \ge \frac{ \sum_{h=1}^{H} W_h S^2_h }{V + \frac{1}{N} \sum_{h=1}^{H} W_h S^2_h}\)`
`\(AES_{ne}\)` | `\(n \ge \frac{ \left( \sum_{h=1}^{H} W_h DP_{h,y} \right)^2 }{V}\)` | `\(n \ge \frac{ \left( \sum_{h=1}^{H} W_h S_{h,y} \right)^2 }{V + \frac{1}{N} \sum_{h=1}^{H} W_h S^2_h}\)`
`\(AES_{ot}\)` | `\(n \ge \frac{ \left( \sum_{h=1}^{H} W_h DP_{h,y} \sqrt{C_h} \right)\left( \sum_{h=1}^{H} W_h DP_{h,y} / \sqrt{C_h} \right) }{V}\)` | `\(n \ge \frac{  \left( \sum_{h=1}^{H} W_h S_{h,y} \sqrt{C_h} \right)\left( \sum_{h=1}^{H} W_h S_{h,y} / \sqrt{C_h} \right) }{V + \frac{1}{N} \sum_{h=1}^{H} W_h S^2_h}\)`
]

---

## Refer√™ncias

Slides baseados no Cap√≠tulo 11 do livro

* [Amostragem: Teoria e Pr√°tica Usando o R](https://amostragemcomr.github.io/livro/index.html)

Cita√ß√µes do Cap√≠tulo

* Neyman(1934)
* Cochran(1977)


&lt;!-- * refazer calculos para amostagem aleatoria simples com reposicao --&gt;
&lt;!-- * alocacao... ou lab R comparando aloca√ß√£o proporcional e igual tamanho --&gt;

&lt;!-- listas de exercicios... --&gt;
&lt;!-- dois aspectos da disciplina... ter flexibilidade com teoria... exercitar os conceitos com exercicios teoricos e praticos --&gt;

&lt;!-- falar dos pesos na AES --&gt;
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
