<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>MAT02036 - Amostragem 2</title>
    <meta charset="utf-8" />
    <meta name="author" content="Markus Stein" />
    <script src="libs/header-attrs-2.18/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/default-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, title-slide

.title[
# MAT02036 - Amostragem 2
]
.subtitle[
## Aula 18 - Amostragem por Conglomerados - Avalia√ß√£o Parcial 2
]
.author[
### Markus Stein
]
.institute[
### Departamento de Estat√≠stica, IME/UFRGS
]
.date[
### 2022/2
]

---




<div>
<style type="text/css">.xaringan-extra-logo {
width: 110px;
height: 128px;
z-index: 0;
background-image: url(C:/Users/User/Documents/MAT02036-Amostragem-2/img/logo_dest.png);
background-size: contain;
background-repeat: no-repeat;
position: absolute;
top:1em;right:1em;
}
</style>
<script>(function () {
  let tries = 0
  function addLogo () {
    if (typeof slideshow === 'undefined') {
      tries += 1
      if (tries < 10) {
        setTimeout(addLogo, 100)
      }
    } else {
      document.querySelectorAll('.remark-slide-content:not(.title-slide):not(.inverse):not(.hide_logo)')
        .forEach(function (slide) {
          const logo = document.createElement('div')
          logo.classList = 'xaringan-extra-logo'
          logo.href = null
          slide.appendChild(logo)
        })
    }
  }
  document.addEventListener('DOMContentLoaded', addLogo)
})()</script>
</div>

### *Housekeeping*

* Aproveitem o momento presencial para tirar d√∫vidas

* Se estiv√©ssemos no ensino remoto ou √† dist√¢ncia

  + voc√™s poderiam estar somente ouvindo, sem intera√ß√£o
  
  + ou assistindo v√≠deos e material em outro momento
  
* Depois das aulas, rever material da aula passada

  + fazer exerc√≠cios
  
  + se preparar para a pr√≥xima aula

---

## Aula passada üíø
### Exerc√≠cios e Lab &lt;i class="fa-duotone fa-people-group"&gt;&lt;/i&gt;<svg aria-hidden="true" role="img" viewBox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:steelblue;overflow:visible;position:relative;"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg>

Utilizaremos o banco de dados `Lucy` (com informa√ß√µes ao n√≠vel individual) para:
a. calcular os par√¢metros e selecionar amostras
b. calcular o coeficiente de correla√ß√£o intraclasse
c. estima√ß√£o e tamanho da amostra, IC

#### Par√¢metros
Arquivo `parametros e sorteio na AC1.R`

#### Estima√ß√£o, tamanho amostra e IC
Arquivo `estimacao e tamanho de amostra AC1.R`

#### CCI
Arquivos `exemplo_pg31_apostila.R` e `exemplo_pg35_apostila.R`

---

class: inverse, middle, center

# Avalia√ß√£o Parcial 2

---

## Avalia√ß√£o Parcial 2
### Instru√ß√µes

* Responda individualmente os itens na caixa de texto, ou anexe um arquivo .pdf com:

  + Desenvolvimento e express√µes (e c√≥digos, se forem utilizados)
  
  + Resposta e interpreta√ß√£o.

Obs. 1: Na caixa de texto √© poss√≠vel colar figuras com desenvolvimentos, express√µes (e c√≥digos).

Obs. 2: O documento .pdf com desenvolvimento e express√µes (c√≥digos, se for o caso), pode ser √∫nico para todas as quest√µes, nesse caso indicar na caixa de texto das quest√µes.

*Boa avalia√ß√£o!*

---

## Avalia√ß√£o Parcial 2
### Quest√£o 1

Considere uma popula√ß√£o com `\(N=8\)` indiv√≠duos, onde 

`$$\boldsymbol{Y} = (9,10,11,17,20,31,32,30).$$`

a. Seja a divis√£o `\(A\)` desta popula√ß√£o: 
`$$U_A = (C_1, C_2) = \left( (9,10,11,17), (20,31,32,30) \right).$$` 
Calcule o coeficiente de correla√ß√£o intraclasse e o interprete. Qual √© o menor valor que o coeficiente pode assumir nesse caso? 

b. Considere agora a divis√£o `\(B\)`: 
`$$U_B = (C_1, C_2) = \left( (10,20,30,11), (32,9,17,31) \right).$$`
Calcule o coeficiente de correla√ß√£o intraclasse. Compare os resultados das duas divis√µes.

c. Na divis√£o `\(A\)` voc√™ recomendaria utilizar um plano **AC1S** ou **AAS**? E na divis√£o B? Justifique.

---

## Avalia√ß√£o Parcial 2
### Quest√£o 2 

Uma empresa de t√°xis deseja estudar a situa√ß√£o dos pneus dos ve√≠culos da sua frota, que √© composta por 175 t√°xis. Para tanto, uma amostra de 10 t√°xis foi selecionada com reposi√ß√£o e, para cada um, se avaliou o n√∫mero de pneus (dentre os 4 pneus em uso) que estavam fora de condi√ß√µes de seguran√ßa. Os resultados obtidos foram:

`$$2,4,0,1,2,0,4,1,3,1$$`

a. Estime a propor√ß√£o de pneus da frota fora de condi√ß√µes pontualmente e por `\(IC\)` `\(95\%\)`.

b. Usando esses resultados como um estudo piloto, qual seria o n√∫mero de t√°xis necess√°rio para obter uma estimativa da propor√ß√£o de pneus fora das condi√ß√µes, com um erro absoluto de `\(2,5\%\)` e `\(95\%\)` de confian√ßa? Considera **AC1s** com reposi√ß√£o.

---

## Avalia√ß√£o Parcial 2
### Quest√£o 3

Considere o banco de dados `agpop` do pacote `SDaA` do `R`. Ap√≥s instalar o pacote, ao executar os comandos abaixo o banco de dados ser√° carregado e poder√° ser utilizado. Considere que os dados se referem a popula√ß√£o de distritos dos EUA.


```r
library(SDaA)
data(agpop)
```

Responda:  
a. Usando o seu cart√£o UFRGS como semente aleat√≥ria (`set.seed(XXXXXXXX)`, onde `XXXXXXXX` √© o n√∫mero do seu cart√£o), sorteie uma **AC1S** de 15 estados (vari√°vel `state`) sem reposi√ß√£o.

b. A partir da amostra sorteada, obtenha e apresente a estimativa pontual e por `\(IC\)` `\(95\%\)` da m√©dia da vari√°vel `largef92`. Interprete os resultados.

c. Produza dois gr√°ficos que descrevam a vari√°vel `largef92`: um na popula√ß√£o, outro na **AC1S** sem reposi√ß√£o sorteada. Comente sobre as diferen√ßas encontradas.

---

class: inverse, middle, center

# Solu√ß√£o

---

## Avalia√ß√£o Parcial 2
### Quest√£o 1 - solu√ß√£o

Do enunciado temos:  
* `\(N=8\)` unidades elementares na popula√ß√£o,
* `\(M=2\)` conglomerados.

```r
## exercicio 1
## dados do problema
Y &lt;- c(9,10,11,17,20,31,32,30)    # vetor pop. de valores Y
CA &lt;- c(1,1,1,1,2,2,2,2)          # indices cluster A
CB &lt;- c(2,1,1,2,1,2,2,1)          # indices cluster B
```

a) O coeficiente de correla√ß√£o intraclasse √© dada pelo coeficiente de correla√ß√£o linear de Pearson dos dos poss√≠veis pares dentro dos conglomerados `\((Y_1', Y_2')\)`, `\(\rho = \frac{Cov(Y_1', Y_2')}{\sqrt{Var(Y_1') Var(Y_2')}}\)`.
* `\(Y_1'\)` significa poss√≠veis valores da primeira posi√ß√£o do par 
* `\(Y_2'\)` significa poss√≠veis valores da segunda posi√ß√£o do par. 

---

## Avalia√ß√£o Parcial 2
### Quest√£o 1 - solu√ß√£o

Adaptando o c√≥digo da `Aula 14`: 

```r
library(gtools)

## divisao A
Ni &lt;- mean(table(CA))                # tamanho de cada conglomerado, igual a Nbarra
## cria os pares
YlinhaCA1 = permutations( length( Y[CA == 1]), 2, Y[CA == 1] ,set=F) # pares cluster 1
YlinhaCA2 = permutations( length( Y[CA == 2]), 2, Y[CA == 2] ,set=F) # pares cluster 2
YlinhaCA = rbind( YlinhaCA1, YlinhaCA2)   # pares de toda a pop.
rhoCA = cor( YlinhaCA[,1], YlinhaCA[,2])  # coef. corr. intraclasse (corr. de pearson dos pares)
rhoCA
```

```
## [1] 0.7406312
```

O coeficiente de correla√ß√£o intraclasse (CCI) para a divis√£o `\(A\)` √© aproximadamente `\(1, 1, 1, 1, 2, 2, 2, 2\)`. O valor m√≠nimo para o CCI √© `\(-\frac{1}{\overline N - 1} = -0.333\)`, o que indica uma grande inefici√™ncia da `\(AC1S\)` usando a conglomera√ß√£o `\(A\)` em rela√ß√£o a **AASc**, pois `\(\rho_{int}\)` est√° pr√≥ximo de 1.

---

## Avalia√ß√£o Parcial 2
### Quest√£o 1 - solu√ß√£o

b) Para a divis√£o `\(B\)` temos

```r
## divisao B
Ni &lt;- mean(table(CB))                # tamanho de cada conglomerado, igual a Nbarra
## cria os pares
YlinhaCB1 = permutations( length( Y[CB == 1]), 2, Y[CB == 1] ,set=F) # pares cluster 1
YlinhaCB2 = permutations( length( Y[CB == 2]), 2, Y[CB == 2] ,set=F) # pares cluster 2
YlinhaCB = rbind( YlinhaCB1, YlinhaCB2)   # pares de toda a pop.
rhoCB = cor( YlinhaCB[,1], YlinhaCB[,2])  # coef. corr. intraclasse (corr. de pearson dos pares)
rhoCB
```

```
## [1] -0.2534517
```

O coeficiente de correla√ß√£o intraclasse (CCI) para a divis√£o `\(B\)` √© aproximadamente `\(-0.2534517\)`, o que indica uma grande efici√™ncia da `\(AC1S\)` usando a conglomera√ß√£o `\(A\)` em rela√ß√£o a **AAS**, pois `\(\rho_{int}\)` est√° pr√≥ximo do m√≠nimo -0.333.

c) N√£o recomendaria na conglomera√ß√£o `\(A\)` e recomendaria na `\(B\)`. Percebemos uma maior heterogeneidade dentro dos conglomerados formados pale divis√£o `\(B\)`, o que fica evidenciado no vlor do **CCI**, sendo negativo para `\(B\)` e positivo p√≥ximo de 1 para a `\(A\)`.

---

## Avalia√ß√£o Parcial 2
### Quest√£o 2 - solu√ß√£o

Do enunciado temos:  
* `\(N = \overline N \times M = 4 \times 175 = 700\)` pneus, unidades elementares, na popula√ß√£o,
* `\(M=175\)` t√°xis, conglomerados.
* `\(m=10\)` t√°xis foram selecionadosa com reposi√ß√£o 
* `\(T_i\)` √© o n√∫mero de pneus (dentre os 4 pneus em uso) que estavam fora de condi√ß√µes de seguran√ßa. 

**Vari√°vel de interesse** `\(Y_{ij}\)`: indicadora do pneu `\(j\)` do t√°xi `\(i\)` estar em condi√ß√µes de seguran√ßa. 


```r
## exercicio 2
## dados do problema
M &lt;- 175         # no. conglomerados pop.
Ni &lt;- 4          # tamanho conglomerados
N &lt;- Ni * M      # tamanho pop
Ti &lt;- c(2,4,0,1,2,0,4,1,3,1)  # totais obtidos
m &lt;- length(Ti)  # no. conglomerados amostra
n &lt;- Ni * m      # tamanho amostra 
```

---

## Avalia√ß√£o Parcial 2
### Quest√£o 2 - solu√ß√£o

a) Para estimar pontualmente a propor√ß√£o de pneus da frota fora de condi√ß√µes, temos dois poss√≠veis estimadores. Aqui conhecemos o tamanho da popula√ß√£o `\(N\)` ent√£o ambos os estimadores s√£o poss√≠veis. Al√©m disso, lembre que ambos os estimadores s√£o iguais no caso de `\(N_i = \overline N\)`, temos 

`$$\widehat P_{AC1S}^{HT} = \frac {\widehat T_{AC1S/HT}}{N} = \frac {M} {N} \frac{1}{m} \sum_{i \in a} T_i = \frac{ \frac{175}{10} 18}{700} = 0.45$$`
ou
`$$\widehat P_{AC1S}^R = \frac{\widehat T_{AC1S}^R}{N} = \frac{1}{n} \sum_{i \in a} T_i = \frac{ \frac{700}{40} 18}{700} = 0.45.$$`

**Estimamos** que a **propor√ß√£o de pneus fora das condi√ß√µes** de seguran√ßa √© aproximadamente 0.45 em cada carro da empresa investigada.

---

## Avalia√ß√£o Parcial 2
### Quest√£o 2 - solu√ß√£o

Um intervalo de confian√ßa para `\(\widehat P\)` √© dados por

`$$IC_{AC1S} (P; 1-\alpha) = \left[ \widehat P_{AC1S} \pm z_{\alpha/2} \sqrt{\widehat{Var}_{AC1S} \left( \widehat P_{AC1S} \right)} \right]$$`

*  O estimador n√£o viciado da vari√¢ncia de `\(\widehat P^{HT}\)` na **AC1S** √© dada por:
  + **COM** reposi√ß√£o,  `\(\widehat Var_{AC1S_c} \left( \widehat P^{HT} \right) =  \frac{1}{\overline N^2} \left( 1 - \frac{1}{M} \right) \frac{s^2_{ec}}{m} \approx  \frac{1}{\overline N^2} \frac{s^2_{ec}}{m}\)`  
  + **SEM** reposi√ß√£o, `\(\widehat Var_{AC1S_s} \left( \widehat P^{HT} \right) = \frac{1}{\overline N^2} \left( 1 - \frac{m}{M} \right) \frac{s^2_{ec}}{m},\)`  
em que `\(s^2_{ec} = \frac{ \sum_{i \in a} \left( T_i - \overline y_C \right)^2}{m-1}\)`.

Com os dados do problema `\(\overline y_C = \frac{\sum_{1 \in a} T_i}{m} = \frac{18}{10} = 1.8\)` e 
$$s^2_{ec} = $$

---

## Avalia√ß√£o Parcial 2
### Quest√£o 2 - solu√ß√£o

b) Usando os resultados como um estudo piloto, o n√∫mero de t√°xis necess√°rio para obter uma estimativa da propor√ß√£o de pneus fora das condi√ß√µes, com um erro absoluto de `\(2,5\%\)` e `\(95\%\)` de confian√ßa, considerando **AC1s** com reposi√ß√£o, ...

---

## Avalia√ß√£o Parcial 2
### Quest√£o 3 - solu√ß√£o

---

## Para casa üè†

&lt;!-- * Fazer a lista 2 de exerc√≠cios. --&gt;

&lt;!-- * Continuar exerc√≠cios. --&gt;

&lt;!-- Continuar o Exerc√≠cio. --&gt;

&lt;!-- * Mostrar tamanho de amostra `\(n\)` para AASc dentro dos estratos. --&gt;

&lt;!-- * Continuar exerc√≠cios do livro 'Amostragem: Teoria e Pr√°tica Usando R'    https://amostragemcomr.github.io/livro/estrat.html#exerc11 --&gt;

* Ler o cap√≠tulo 2 da apostila da Profa. Vanessa.

* Ler o cap√≠tulo 8 do livro 'Amostragem: Teoria e Pr√°tica Usando R'.
  
* Rever os slides.

&lt;!-- * Ler BOlfarine e Bussab...da se√ß√£o 11.3 do livro 'Amostragem: Teoria e Pr√°tica Usando R'. --&gt;

&lt;!-- * Prepara√ß√£o para avalia√ß√£o parcial 2 --&gt;

## Pr√≥xima aula üìä

* Acompanhar o material no moodle.

* Amostragem Sistem√°tica

  + Introdu√ß√£o.
  
  + Par√¢metros e Estima√ß√£o
  
&lt;!-- Laborat√≥rio de &lt;i class="fa-duotone fa-people-group"&gt;&lt;/i&gt;<svg aria-hidden="true" role="img" viewBox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:steelblue;overflow:visible;position:relative;"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg> --&gt;

---

## Muito obrigado!

&lt;img src="img/image_basu_elephant.jpg" width="20%" height="20%" style="display: block; margin: auto;" /&gt;
.center[
#### Fonte: imagem do livro *Combined Survey Sampling Inference: Weighing of Basu's Elephants*.
]


---

## Refer√™ncias

&lt;!-- Slides baseados no Cap√≠tulo 11 do livro --&gt;

* [Amostragem: Teoria e Pr√°tica Usando o R](https://amostragemcomr.github.io/livro/index.html)

* **Elementos de Amostragem**, Bolfarine e Bussab.

&lt;!-- Cita√ß√µes do Cap√≠tulo --&gt;

&lt;!-- * Neyman(1934) --&gt;

* Cochran(1977)


&lt;!-- * refazer calculos para amostagem aleatoria simples com reposicao --&gt;
&lt;!-- * alocacao... ou lab R comparando aloca√ß√£o proporcional e igual tamanho --&gt;

&lt;!-- listas de exercicios... --&gt;
&lt;!-- dois aspectos da disciplina... ter flexibilidade com teoria... exercitar os conceitos com exercicios teoricos e praticos --&gt;

&lt;!-- falar dos pesos na AES --&gt;

&lt;!-- valor z_alpha/2 significa z ou t --&gt;

&lt;!-- quem tiver interesse em conferir as f√≥rmulas... mostra as conttas, gosta dessa pparte...posso contabilizar ponto extra... tem q ser o primeira... --&gt;
&lt;!-- o mesmo pode valer para os c√≥digos e texto... --&gt;
&lt;!-- fazer o formul√°rio --&gt;
&lt;!-- resumo de formulas --&gt;

---

## Resumo da nota√ß√£o

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
